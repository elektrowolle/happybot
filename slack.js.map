{"version":3,"sources":["slack.es6"],"names":[],"mappings":";;AAAA,IAAI,KAAK,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AACpC,IAAI,KAAK,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACxC,IAAI,YAAY,GAAG,OAAO,CAAC,wBAAwB,CAAC,CAAC;;AAErD,MAAM,CAAC,OAAO,GAAI,YAAY;AAC5B,MAAI,UAAU,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC;AACxC,MAAI,aAAa,GAAG,IAAI,CAAC;AACzB,MAAI,QAAQ,GAAG,IAAI,CAAC;;AAEpB,MAAI,KAAK,GAAG,IAAI,KAAK,CAAC,UAAU,EAAE,aAAa,EAAE,QAAQ,CAAC,CAAC;;AAE3D,MAAI,UAAU,GAAU,EAAE,CAAC;AAC3B,MAAI,iBAAiB,GAAG,EAAE,CAAC;;AAE3B,OAAK,CAAC,EAAE,CAAC,MAAM,EAAE,YAAY;AAC3B,WAAO,CAAC,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GAC3E,CAAC,CAAC;;AAEH,OAAK,CAAC,EAAE,CAAC,SAAS,EAAE,UAAU,OAAO,EAAE;AACrC,WAAO,CAAC,GAAG,CAAC,UAAU,GAAG,OAAO,CAAC,CAAC;AAClC,QAAI,OAAO,GAAG,KAAK,CAAC,uBAAuB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC7D,QAAI,IAAI,GAAM,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;AAE9C,WAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;AAClC,WAAO,CAAC,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;;AAExC,QAAG,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,EAAC;AACjC,uBAAiB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;KACpC,MAAK;;AAEJ,UAAI,IAAI,GAAG,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AACvC,UAAI,IAAI,IAAI,SAAS,EAAE;AACrB,YAAI,CAAC,EAAC,SAAS,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC;OAC9D;KAEF;GACF,CAAC,CAAC;;AAEH,YAAU,CAAC,IAAI,CAAC,GAAI,UAAC,IAAI,EAAG;AAC1B,qBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,YAAY,EAAE,CAAC;GAC3D,AAAC,CAAC;;AAEH,OAAK,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,GAAG,EAAE;AAC/B,WAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;GAC7B,CAAC,CAAC;;AAEH,OAAK,CAAC,KAAK,EAAE,CAAC;CACf,AAAC,CAAC","file":"slack.js","sourcesContent":["var Slack = require('slack-client');\nvar happy = require('./happyKnowledge');\nvar Conversation = require('./SlackConversation.js');\n\nmodule.exports = (function () {\n  var slackToken = process.env.SlackToken;\n  var autoReconnect = true;\n  var autoMark = true;\n\n  var slack = new Slack(slackToken, autoReconnect, autoMark);\n\n  var slackHooks        = {};\n  var slackConversation = {};\n\n  slack.on('open', function () {\n    console.log(\"Connected to \" + slack.team.name + \" as \" + slack.self.name);\n  });\n\n  slack.on('message', function (message) {\n    console.log('Message:' + message);\n    var channel = slack.getChannelGroupOrDMByID(message.channel);\n    var user    = slack.getUserByID(message.user);\n\n    console.log(\"user: \" + user.name);\n    console.log(\"channel: \" + channel.name);\n\n    if(slackConversation[message.user]){\n      slackConversation.process(message);\n    }else {\n\n      var hook = slackHooks[message.message];\n      if (hook != undefined) {\n        hook({'message': message, 'channel': channel, 'user': user});\n      }\n\n    }\n  });\n\n  slackHooks['Hi'] = ((info)=>{\n    slackConversation[info.message.user] = new Conversation();\n  });\n\n  slack.on('error', function (err) {\n    console.log('Error:' + err);\n  });\n\n  slack.login();\n});\n"]}