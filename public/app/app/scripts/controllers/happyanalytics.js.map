{"version":3,"sources":["happyanalytics.es6"],"names":[],"mappings":"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","file":"happyanalytics.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc function\n * @name appApp.controller:HappyanalyticsCtrl\n * @description\n * # HappyanalyticsCtrl\n * Controller of the appApp\n */\n\nclass HappyKnowledge {\n\n  constructor(user, slackId, date, happydex, id) {\n    if(typeof(user) == 'object'){\n      this.id       = user.id;\n      this.user     = user.user;\n      this.slackId  = user.slackId;\n      this.date     = user.date;\n      this.happydex = user.happydex;\n    }else {\n      this.id       = id;\n      this.user     = user;\n      this.slackId  = slackId;\n      this.date     = date;\n      this.happydex = happydex;\n    }\n\n    var fireBaseRefUrl = process.env.firebaseRoot + '/' + this.slackId + '/' + this.date;\n    this.fire = new Firebase(\n      fireBaseRefUrl);\n    //process.env.firebaseRoot);\n\n    console.log(\"new Knowledge (\" + fireBaseRefUrl + \"): \");\n    console.log(this);\n  }\n\n};\n\nangular.module('appApp')\n.controller('HappyanalyticsCtrl', function (\n  $scope,\n  $firebaseObject,\n  $filter\n  )\n{\n\n    var ref = new Firebase(\"https://happybotixds.firebaseio.com/happy/\");\n    var fbResponse = $firebaseObject(ref);\n\n    $scope.chartData = [];\n\n\n    $scope.data = fbResponse;\n    $scope.chartOptions = {\n      chart: {\n        type: 'lineChart',\n        height: 450,\n        margin: {\n          top: 20,\n          right: 20,\n          bottom: 30,\n          left: 40\n        },\n        useVoronoi: false,\n        clipEdge: true,\n        duration: 100,\n        useInteractiveGuideline: true,\n        xAxis: {\n          ticks: 5,\n        },\n        x: (d)=>{return d[0]},\n        y: (d)=>{return d[1]},\n\n        //zoom: {\n        //  enabled: true,\n        //  scaleExtent: [1, 10],\n        //  //useFixedDomain: false,\n        //  useNiceScale: false,\n        //  horizontalOff: true,\n        //  verticalOff: false,\n        //  unzoomEventType: 'dblclick.zoom'\n        //}\n      }\n    };\n    var calculateChartData = function (){\n      $scope.chartData = [];\n      for(var user in $scope.data){\n        if(user.indexOf('\\$') != -1 || user.indexOf('forEach') != -1) {\n          continue;\n        }\n        var chartDate = {};\n\n        chartDate.key = user;\n        chartDate.values = [];\n        for(var date in $scope.data[user]) {\n          chartDate.values.push([\n            parseInt(date),\n            $scope.data[user][date].happydex\n          ]);\n\n        }\n        console.log(\"push new date: \");\n        console.log(chartDate);\n        console.log($scope.chartData);\n        $scope.chartData.push(chartDate);\n      }\n    };\n    calculateChartData();\n\n    $scope.chartReady = calculateChartData();\n\n    $scope.data.$watch(()=>{\n      //$scope.chartData = [];\n      console.log(\"data changed\");\n      calculateChartData();\n\n    });\n\n  });\n"]}