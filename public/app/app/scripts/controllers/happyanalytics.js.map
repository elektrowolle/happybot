{"version":3,"sources":["happyanalytics.es6"],"names":[],"mappings":"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","file":"happyanalytics.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc function\n * @name appApp.controller:HappyanalyticsCtrl\n * @description\n * # HappyanalyticsCtrl\n * Controller of the appApp\n */\n\nclass HappyKnowledge {\n\n  constructor(user, slackId, date, happydex, id) {\n    if(typeof(user) == 'object'){\n      this.id       = user.id;\n      this.user     = user.user;\n      this.slackId  = user.slackId;\n      this.date     = user.date;\n      this.happydex = user.happydex;\n    }else {\n      this.id       = id;\n      this.user     = user;\n      this.slackId  = slackId;\n      this.date     = date;\n      this.happydex = happydex;\n    }\n\n    var fireBaseRefUrl = process.env.firebaseRoot + '/' + this.slackId + '/' + this.date;\n    this.fire = new Firebase(\n      fireBaseRefUrl);\n    //process.env.firebaseRoot);\n\n    console.log(\"new Knowledge (\" + fireBaseRefUrl + \"): \");\n    console.log(this);\n  }\n};\n\nangular.module('appApp')\n  .controller('HappyanalyticsCtrl', function (\n    $scope,\n    $firebaseObject,\n    $filter\n  )\n  {\n    $scope.chartData = {};\n\n    var ref = new Firebase(\"https://happybotixds.firebaseio.com/happy/\");\n\n    var fbResponse = $firebaseObject(ref);\n    $scope.chartData = [];\n\n    $scope.data = fbResponse;\n    $scope.chartOptions = {\n      chart: {\n        type: 'stackedAreaChart',\n        height: 450,\n        margin : {\n          top: 20,\n          right: 20,\n          bottom: 30,\n          left: 40\n        },\n        x: function(d){return d[0];},\n        y: function(d){return d[1];},\n        useVoronoi: false,\n        clipEdge: true,\n        duration: 100,\n        useInteractiveGuideline: true,\n        xAxis: {\n          showMaxMin: false,\n          tickFormat: function(d) {\n            return d3.time.format('%x')(new Date(d))\n          }\n        },\n        yAxis: {\n          tickFormat: function(d){\n            return d3.format(',.2f')(d);\n          }\n        },\n        zoom: {\n          enabled: true,\n          scaleExtent: [1, 10],\n          useFixedDomain: false,\n          useNiceScale: false,\n          horizontalOff: false,\n          verticalOff: true,\n          unzoomEventType: 'dblclick.zoom'\n        }\n      }\n    };\n\n    $scope.data.$watch(()=>{\n      //$scope.chartData = [];\n      for(var user in $scope.data){\n        if(user.indexOf('\\$') == -1) {\n          continue;\n        }\n\n        var chartDate = {};\n        chartDate.key = user;\n        chartDate.values = [];\n        for(var date in $scope.data[user]) {\n          chartDate.values.push([date, $scope.data[user][date].happydex]);\n\n        }\n        $scope.chartData.push = chartDate;\n      }\n    });\n\n  });\n"]}