{"version":3,"sources":["happyanalytics.es6"],"names":[],"mappings":"AAAA,YAAY;;;;;;;;;;AAAC;;;;IAUP,cAAc,GAElB,SAFI,cAAc,CAEN,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE;wBAF3C,cAAc;;AAGhB,MAAG,QAAO,IAAI,yCAAJ,IAAI,MAAK,QAAQ,EAAC;AAC1B,QAAI,CAAC,EAAE,GAAS,IAAI,CAAC,EAAE,CAAC;AACxB,QAAI,CAAC,IAAI,GAAO,IAAI,CAAC,IAAI,CAAC;AAC1B,QAAI,CAAC,OAAO,GAAI,IAAI,CAAC,OAAO,CAAC;AAC7B,QAAI,CAAC,IAAI,GAAO,IAAI,CAAC,IAAI,CAAC;AAC1B,QAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;GAC/B,MAAK;AACJ,QAAI,CAAC,EAAE,GAAS,EAAE,CAAC;AACnB,QAAI,CAAC,IAAI,GAAO,IAAI,CAAC;AACrB,QAAI,CAAC,OAAO,GAAI,OAAO,CAAC;AACxB,QAAI,CAAC,IAAI,GAAO,IAAI,CAAC;AACrB,QAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;GAC1B;;AAED,MAAI,cAAc,GAAG,OAAO,CAAC,GAAG,CAAC,YAAY,GAAG,GAAG,GAAG,IAAI,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC;AACrF,MAAI,CAAC,IAAI,GAAG,IAAI,QAAQ,CACtB,cAAc,CAAC;;;AAAC,AAGlB,SAAO,CAAC,GAAG,CAAC,iBAAiB,GAAG,cAAc,GAAG,KAAK,CAAC,CAAC;AACxD,SAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;CACnB;;AAEF,CAAC;;AAEF,IAAI,YAAY,GAAG;AACjB,OAAK,EAAE;AACL,QAAI,EAAE,kBAAkB;AACxB,UAAM,EAAE,GAAG;AACX,UAAM,EAAE;AACN,SAAG,EAAE,EAAE;AACP,WAAK,EAAE,EAAE;AACT,YAAM,EAAE,EAAE;AACV,UAAI,EAAE,EAAE;KACT;AACD,KAAC,EAAE,WAAU,CAAC,EAAE;AACd,aAAO,CAAC,CAAC,CAAC,CAAC,CAAC;KACb;AACD,KAAC,EAAE,WAAU,CAAC,EAAE;AACd,aAAO,CAAC,CAAC,CAAC,CAAC,CAAC;KACb;AACD,cAAU,EAAE,KAAK;AACjB,YAAQ,EAAE,IAAI;AACd,YAAQ,EAAE,GAAG;AACb,2BAAuB,EAAE,IAAI;AAC7B,SAAK,EAAE;AACL,gBAAU,EAAE,KAAK;AACjB,gBAAU,EAAE,oBAAU,CAAC,EAAE;AACvB,eAAO,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;OACzC;KACF;AACD,SAAK,EAAE;AACL,gBAAU,EAAE,oBAAU,CAAC,EAAE;AACvB,eAAO,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;OAC7B;KACF;AACD,QAAI,EAAE;AACJ,aAAO,EAAE,IAAI;AACb,iBAAW,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;AACpB,oBAAc,EAAE,KAAK;AACrB,kBAAY,EAAE,KAAK;AACnB,mBAAa,EAAE,KAAK;AACpB,iBAAW,EAAE,IAAI;AACjB,qBAAe,EAAE,eAAe;KACjC;GACF;CACF,CAAC;;AAGF,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,CACvB,UAAU,CAAC,oBAAoB,EAAE,UAChC,MAAM,EACN,eAAe,EACf,OAAO,EAET;;AAEI,MAAI,GAAG,GAAG,IAAI,QAAQ,CAAC,4CAA4C,CAAC,CAAC;AACrE,MAAI,UAAU,GAAG,eAAe,CAAC,GAAG,CAAC,CAAC;;AAEtC,QAAM,CAAC,SAAS,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;;AAGjC,QAAM,CAAC,IAAI,GAAG,UAAU,CAAC;AACzB,QAAM,CAAC,YAAY,GAAG,YAAY,CAAC;;AAEnC,MAAI,kBAAkB,GAAG,SAArB,kBAAkB,GAAc;AAClC,SAAI,IAAI,IAAI,IAAI,MAAM,CAAC,IAAI,EAAC;;;;;AAK1B,UAAI,SAAS,GAAG,EAAE,CAAC;AACnB,eAAS,CAAC,GAAG,GAAG,IAAI,CAAC;AACrB,eAAS,CAAC,MAAM,GAAG,EAAE,CAAC;AACtB,WAAI,IAAI,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;AACjC,iBAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;OAEjE;AACD,YAAM,CAAC,SAAS,CAAC,IAAI,GAAG,SAAS,CAAC;KACnC;GACF,CAAC;;AAEF,oBAAkB,EAAE,CAAC;;AAErB,QAAM,CAAC,IAAI,CAAC,MAAM,CAAC,YAAI;;AAErB,WAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAC5B,sBAAkB,EAAE,CAAC;GACtB,CAAC,CAAC;CAEJ,CAAC,CAAC","file":"happyanalytics.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc function\n * @name appApp.controller:HappyanalyticsCtrl\n * @description\n * # HappyanalyticsCtrl\n * Controller of the appApp\n */\n\nclass HappyKnowledge {\n\n  constructor(user, slackId, date, happydex, id) {\n    if(typeof(user) == 'object'){\n      this.id       = user.id;\n      this.user     = user.user;\n      this.slackId  = user.slackId;\n      this.date     = user.date;\n      this.happydex = user.happydex;\n    }else {\n      this.id       = id;\n      this.user     = user;\n      this.slackId  = slackId;\n      this.date     = date;\n      this.happydex = happydex;\n    }\n\n    var fireBaseRefUrl = process.env.firebaseRoot + '/' + this.slackId + '/' + this.date;\n    this.fire = new Firebase(\n      fireBaseRefUrl);\n    //process.env.firebaseRoot);\n\n    console.log(\"new Knowledge (\" + fireBaseRefUrl + \"): \");\n    console.log(this);\n  }\n\n};\n\nvar chartOptions = {\n  chart: {\n    type: 'stackedAreaChart',\n    height: 450,\n    margin: {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 40\n    },\n    x: function (d) {\n      return d[0];\n    },\n    y: function (d) {\n      return d[1];\n    },\n    useVoronoi: false,\n    clipEdge: true,\n    duration: 100,\n    useInteractiveGuideline: true,\n    xAxis: {\n      showMaxMin: false,\n      tickFormat: function (d) {\n        return d3.time.format('%x')(new Date(d))\n      }\n    },\n    yAxis: {\n      tickFormat: function (d) {\n        return d3.format(',.2f')(d);\n      }\n    },\n    zoom: {\n      enabled: true,\n      scaleExtent: [1, 10],\n      useFixedDomain: false,\n      useNiceScale: false,\n      horizontalOff: false,\n      verticalOff: true,\n      unzoomEventType: 'dblclick.zoom'\n    }\n  }\n};\n\n\nangular.module('appApp')\n.controller('HappyanalyticsCtrl', function (\n  $scope,\n  $firebaseObject,\n  $filter\n  )\n{\n\n    var ref = new Firebase(\"https://happybotixds.firebaseio.com/happy/\");\n    var fbResponse = $firebaseObject(ref);\n\n    $scope.chartData = [1,2,3,4,5,6];\n\n\n    $scope.data = fbResponse;\n    $scope.chartOptions = chartOptions;\n\n    var calculateChartData = function (){\n      for(var user in $scope.data){\n        //if(user.indexOf('\\$') == -1) {\n        //  continue;\n        //}\n\n        var chartDate = {};\n        chartDate.key = user;\n        chartDate.values = [];\n        for(var date in $scope.data[user]) {\n          chartDate.values.push([date, $scope.data[user][date].happydex]);\n\n        }\n        $scope.chartData.push = chartDate;\n      }\n    };\n\n    calculateChartData();\n\n    $scope.data.$watch(()=>{\n      //$scope.chartData = [];\n      console.log(\"data changed\");\n      calculateChartData();\n    });\n\n  });\n"]}